/* Simple Mermaid theme CSS - this gets injected via themeCSS, not as a stylesheet */

/* Fix node styling - only text, let nodes keep natural colors */
.node text {
  fill: var(--sl-color-text);
}

/* Fix start state circles for dark theme */
.node circle.state-start {
  fill: var(--sl-color-text);
  stroke: var(--sl-color-text);
}

/* Dark mode fixes for start states */
html[data-theme="dark"] .node circle.state-start {
  fill: var(--sl-color-text);
  stroke: var(--sl-color-text);
}

/* Fix state nodes */
.state rect {
  fill: var(--sl-color-gray-2);
  stroke: var(--sl-color-gray-5);
}
.state text {
  fill: var(--sl-color-text);
}

/* State diagram specific - use Mermaid's actual classes */
.statediagram-state rect {
  fill: var(--sl-color-gray-2);
  stroke: var(--sl-color-gray-5);
}
.statediagram-state text {
  fill: var(--sl-color-text);
}

/* Fix state diagram groups/clusters - transparent on both themes */
.statediagram-cluster rect,
.statediagram-cluster.statediagram-cluster .inner rect,
.statediagram-cluster .inner rect,
#mermaid-1 .statediagram-cluster rect,
#mermaid-1 .statediagram-cluster .inner rect {
  fill: transparent !important;
  background: transparent !important;
}

/* Dark mode - keep transparent */
html[data-theme="dark"] .statediagram-cluster rect,
html[data-theme="dark"] .statediagram-cluster .inner rect,
html[data-theme="dark"] .statediagram-cluster.statediagram-cluster .inner rect,
html[data-theme="dark"] #mermaid-1 .statediagram-cluster rect,
html[data-theme="dark"] #mermaid-1 .statediagram-cluster .inner rect {
  fill: transparent !important;
  background: transparent !important;
}

/* Edge labels with better contrast */
.edgeLabel text { 
  fill: var(--sl-color-text) !important; 
}
.edgeLabel rect {
  fill: var(--sl-color-bg) !important;
  stroke: var(--sl-color-gray-4) !important;
}
.edgeLabel p {
  border: none !important;
}

/* Dark mode edge label fixes */
html[data-theme="dark"] .edgeLabel rect {
  fill: var(--sl-color-gray-2) !important;
  stroke: var(--sl-color-gray-5) !important;
}
html[data-theme="dark"] .edgeLabel p {
  border: 2px solid red !important;
}

/* Flowchart cluster styling removed - handled in mermaid.css */

/* Dark mode flowchart cluster fixes - MOVED TO mermaid.css */

/* Fix edge visibility */
.transition,
.flowchart-link {
  stroke: var(--sl-color-text) !important;
}