---
import StateMachineMermaidDiagram from "@components/MachineViz";
import { getXStateDefinition } from "@code/examples/lib/matchina-machine-to-xstate-definition";
import { createApi, createPromiseMachine, delay, type FactoryMachine } from "matchina";

const machine = createPromiseMachine(async (_message: string) => await delay(1000))
const config = getXStateDefinition(machine as FactoryMachine<any>)
const actions = createApi(machine)
---

<StateMachineMermaidDiagram config={config} stateKey={machine.getState().key} client:only="react" actions={actions}  />