---
title: Lifecycle & Hooks
description: Intercept and react to state changes with lifecycle hooks
---

import { LifecycleDemo } from "@components/LifecycleDemo";
import { Tabs, TabItem } from '@astrojs/starlight/components';


## Configure multiple hooks with `onLifecycle`

You can combine multiple hooks to create sophisticated behavior:

```ts
onLifecycle(machine, {
  Idle: {
    on: {
      execute: {
        after: ({ type, from, to }) => {
          console.log("Executing from Idle to Pending");
        }
      }
    },
    exit: ({ type, from, to }) => {
      console.log("Exiting Idle state");
    }
  },
  Pending: {
    enter: ({ type, from, to }) => {
      console.log("Entering Pending state");
    }
  }
});
```

## Interactive Example

<div className="not-content">
  <LifecycleDemo client:only="react" />
</div>

Here's the onLifecycle logging code behind this example:

```ts
 onLifecycle(machine, {
  Idle: {
    on: {
      executing: {
        after: ({ type, from, to, params }) => {
          console.log(
            "after Idle.executing:",
            type,
            from.key,
            to.key,
            Object.keys(params),
          );
        },
      },
    },
  },
  "*": {
    on: {
      "*": {
        after: (ev) => {
          console.log(`[${ev.type}]:`, ev.to.key, ev.to.data);
        },
      },
      reject: {
        after: ({ type, from, to }) => {
          const { name, stack, message } = to.data;
          console.log(
            "after",
            type,
            "from",
            from.key,
            name,
            message,
            stack,
          );
        },
      },
      resolve: {
        before: ({ type, from: _from, to: { data } }) => {
          console.log("before", type, data);
        },
      },
    },
  },
})
```


## Next Steps

Now that you understand lifecycle hooks, explore these related guides:

- [Effects](/guides/effects) - Learn about the dedicated effects system
- [Factory Machines](/guides/machines) - Create complete state machines
- [Promise Machines](/guides/promises) - Handle async operations with state machines
- [React Integration](/guides/integrations) - Use lifecycle hooks with React
```
