---
title: Stopwatch using State Data and Hooks
---

import StopwatchExample from "@code/examples/stopwatch-using-data-and-hooks";
import machineCode from "@code/examples/stopwatch-using-data-and-hooks/machine.ts?raw";
import viewCode from "@code/examples/stopwatch-using-data-and-hooks/StopwatchView.tsx?raw";
import indexCode from "@code/examples/stopwatch-using-data-and-hooks/index.tsx?raw";
import CodeBlock from "@components/CodeBlock.astro";
import CodeTabs from "@components/CodeTabs.astro";

## Interactive Stopwatch Example

<div className="not-content">
  <StopwatchExample client:visible />
</div>

## About This Example

This example demonstrates how to use state `data` instead of React's `useState`. Key features:

- Uses `useMemo` only to create the state machine
- Avoids `useEffect` and `useState` dependencies
- Makes `elapsed` a part of the state's `data`
- Uses lifecycle hooks to manage state transitions
- Automatically resets `elapsed` to `0` when stopped

The `when` helper functions as an alternative to `useEffect`, tracking when a condition is entered and running entry/exit handlers.

## Machine Code

<CodeTabs
  files={[
    { name: "machine.ts", code: machineCode },
    { name: "StopwatchView.tsx", code: viewCode },
    { name: "index.tsx", code: indexCode },
  ]}
/>
