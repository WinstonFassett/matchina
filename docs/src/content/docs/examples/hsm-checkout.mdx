---
title: Hierarchical Checkout
description: A complex checkout flow with nested payment submachine demonstrating hierarchical state management.
---

import Example from "@code/examples/hsm-checkout/example";
import machineCode from "@code/examples/hsm-checkout/machine.ts?raw";
import flatMachineCode from "@code/examples/hsm-checkout/machine-flat.ts?raw";
import CodeTabs from "@components/CodeTabs.astro";

E-commerce checkout flow with nested payment submachine. Toggle below to compare flattened vs nested HSM implementations.

<div className="not-content">
  <Example client:only="react" />
</div>

<CodeTabs
  files={[
    { name: "machine.ts (Hierarchical)", code: machineCode },
    { name: "machine-flat.ts (Flattened)", code: flatMachineCode },
  ]}
/>
