---
title: File Uploader (Hierarchical)
description: Offline-capable uploader with online/offline parent states and per-file child lifecycle
---

import UploaderExample from "@code/examples/hsm-file-uploader/example";
import machineCode from "@code/examples/hsm-file-uploader/machine.ts?raw";
import viewCode from "@code/examples/hsm-file-uploader/FileUploaderView.tsx?raw";
import indexCode from "@code/examples/hsm-file-uploader/index.tsx?raw";
import CodeTabs from "@components/CodeTabs.astro";

An offline-capable uploader modeled as a hierarchical state machine. The parent controls Online/Offline modes; files progress through their own lifecycle.

<div className="not-content">
  <UploaderExample client:only="react" />
</div>

## Source Code

<CodeTabs
  files={[
    { name: "machine.ts", code: machineCode },
    { name: "FileUploaderView.tsx", code: viewCode },
    { name: "index.tsx", code: indexCode },
  ]}
/>

## Notes

- Parent states: `Online`, `Offline`.
- File lifecycle: `Queued → Uploading → Verifying → Completed/Error`.
- Uses `addEventApi` for ergonomic calls: `machine.api.enqueue()`, `machine.api.progress(id, pct)`, etc.
