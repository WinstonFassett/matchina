---
title: transitionHooks API
sidebar_label: transitionHooks
---

# API Reference: `transitionHooks`

`transitionHooks(...configs)` is a flat, composable API for registering lifecycle hooks on a FactoryMachine. Each config object can specify matching criteria (`from`, `to`, `type`) and any lifecycle phase (`effect`, `before`, `after`, `guard`, etc.).

## Parameters
- `...configs`: One or more config objects. Each config can include:
  - `from`: State key to match the previous state
  - `to`: State key to match the next state
  - `type`: Event type to match
  - Any lifecycle hook: `effect`, `before`, `after`, `guard`, etc.

## Types
- All keys and handlers are strictly typed to the machine's states and events.
- Config objects use `Partial<ChangeEventKeyFilter<FactoryMachineEvent<FC>>>` for type safety.

## Return Value
- Returns a setup enhancer function for the machine.

## Example
```ts
setup(machine)(
  transitionHooks(
    { from: "Idle", type: "start", to: "Running", effect: fn, before, after },
    { from: "Idle", enter: fn, leave: fn },
    { type: "resolve", guard: e => true },
    { effect: globalFn }
  )
);
```

## Real Example (Stopwatch)
```ts
setup(stopwatch)(
  transitionHooks(
    { to: "Ticking", enter: () => tickEffect(() => setElapsed(Date.now() - (stopwatch.startTime ?? 0))) },
    { type: "start", effect: () => setStartTime(Date.now()) },
    { from: "Ticking", type: "clear", effect: () => setStartTime(Date.now()) },
    { from: "Suspended", type: "clear", effect: () => setStartTime(undefined) },
    { type: "clear", effect: () => setElapsed(0) },
    { type: "stop", effect: () => setElapsed(0) },
    { type: "resume", effect: () => setStartTime(Date.now() - (stopwatch.elapsed ?? 0)) }
  )
);
```

## See Also
- [Guides: transitionHooks](../guides/transition-hooks)
- [Live Example: TransitionHooksDemo](../../code/examples/TransitionHooksDemo.tsx)
