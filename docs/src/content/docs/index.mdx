---
title: Welcome to Matchina
description: A TypeScript-first, lightweight toolkit for building type-safe state machines with powerful pattern matching and async handling.
hero:
  title: |
    Type-Safe State
    <span
      class="font-black text-transparent
        bg-clip-text bg-gradient-to-b
        from-accent-700 to-accent-400
        dark:from-accent-500 dark:to-accent-200"
    >
      Matchina
    </span>
  tagline: Build strongly-typed state machines with powerful pattern matching
  actions:
    - text: Quick Start
      link: ./guides/quickstart/
      icon: right-arrow
      variant: primary
    - text: GitHub
      link: https://github.com/winstonfassett/matchina
      icon: external
---

import CodeBlock from "@components/CodeBlock.astro";
import { Tabs, TabItem } from "@astrojs/starlight/components";

## What is Matchina?

Matchina is a TypeScript-first, lightweight toolkit for building type-safe state machines, with powerful pattern matching and async handling. It provides:

- **Strongly-typed state machines** with full type inference
- **Tagged unions** via the `matchbox` pattern for discriminated types
- **Type-safe transitions** with smart parameter inference
- **Promise integration** for handling async operations safely
- **Nano-sized, opt-in primitives** for state machines and async logic
- **Composable APIs** that work together or standalone

## Key Features

<Tabs>
  <TabItem label="TypeScript-First">
    ```ts twoslash
    import { defineStates, createMachine, zen } from "matchina";
    // TypeScript automatically infers parameter types based on destination states
    const states = defineStates({
      Idle: undefined,
      Playing: (trackId: string) => ({ trackId }),
      Paused: (trackId: string) => ({ trackId }),
      Stopped: undefined,
    });
    
    const baseMachine = createMachine(
      states,
      {
        Idle: { 
          start: (trackId: string) => "Playing" // Parameter type matches Playing state
        },
        // ...transitions
      },
      "Idle"
    );
    
    const player = zen(baseMachine);

    // Full type safety for state transitions
    player.start("song-123");  // âœ“ TypeScript knows this needs a trackId
    player.start();            // âœ— Error: Expected 1 argument, but got 0
    ```

  </TabItem>
  <TabItem label="Pattern Matching">
    ```ts
    // Use pattern matching to handle different states
    const message = player.state.match({
      Idle: () => "Not playing",
      Playing: ({ trackId }) => `Now playing: ${trackId}`,
      Paused: ({ trackId }) => `Paused: ${trackId}`,
      Stopped: () => "Stopped",
    });
    ```
  </TabItem>
  <TabItem label="Type Guards">
    ```ts
    // Type guards automatically narrow types
    if (player.state.is("Playing")) {
      // TypeScript knows player.state.data has trackId
      console.log(player.state.data.trackId);  // âœ“ Type-safe
    }
    ```
  </TabItem>
  <TabItem label="Promise Handling">
    ```ts
    // Create a promise machine for async operations
    const fetcher = createPromiseMachine(
      (id: string) => fetch(`/api/data/${id}`).then(r => r.json())
    );
    
    // Type-safe state handling
    const ui = fetcher.getState().match({
      Idle: () => "Ready to fetch data",
      Pending: ({params}) => `Loading data for ${params[0]}...`,
      Resolved: (data) => `Data loaded: ${JSON.stringify(data)}`,
      Rejected: (error) => `Error: ${error.message}`
    });
    ```
  </TabItem>
</Tabs>

## Why Matchina?

- **Lightweight**: Each feature is just a few hundred bytes
- **TypeScript-First**: Full type inference and safety
- **Composable**: Use only what you need
- **No Dependencies**: Zero runtime dependencies
- **React Integration**: First-class support for React

## Quick Installation

```sh
npm install matchina
```

## Get Started

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <a
    href="./guides/quickstart/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>ğŸ“š Quickstart Guide</h3>
    <p>Get up and running with Matchina in minutes</p>
  </a>
  <a
    href="./guides/union-machines/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>ğŸ§© Type-Safe Unions</h3>
    <p>Learn about Matchbox for tagged unions</p>
  </a>
  <a
    href="./guides/machines/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>âš™ï¸ Factory Machines</h3>
    <p>Create full state machines with TypeScript inference</p>
  </a>
  <a
    href="./guides/promises/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>â³ Async Operations</h3>
    <p>Manage async flows with promise machines</p>
  </a>
</div>

## Explore Examples

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <a
    href="./examples/toggle/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>ğŸ”„ Toggle</h3>
    <p>Simple on/off toggle state machine</p>
  </a>
  <a
    href="./examples/fetch-simple/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>ğŸ“¡ Data Fetching</h3>
    <p>Type-safe async data fetching</p>
  </a>
  <a
    href="./examples/traffic-light/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>ğŸš¦ Traffic Light</h3>
    <p>State machine with automatic transitions</p>
  </a>
  <a
    href="./examples/form/"
    class="card p-4 bg-gray-100 dark:bg-gray-800 rounded-lg hover:shadow-md transition-shadow"
  >
    <h3>ğŸ“ Form Validation</h3>
    <p>Form with validation state machine</p>
  </a>
</div>
