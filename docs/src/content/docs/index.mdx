---
title: Welcome to Matchina
description: A TypeScript-first, lightweight toolkit for building type-safe state machines with powerful pattern matching and async handling.
hero:
  title: |
    Type-Safe State
    <span
      class="font-black text-transparent
        bg-clip-text bg-gradient-to-b
        from-accent-700 to-accent-400
        dark:from-accent-500 dark:to-accent-200"
    >
      Matchina
    </span>
  tagline: Build strongly-typed state machines with powerful pattern matching
  actions:
    - text: Quick Start
      link: ./guides/quickstart/
      icon: right-arrow
      variant: primary
    - text: GitHub
      link: https://github.com/winstonfassett/matchina
      icon: external
---

import { Card, CardGrid, LinkCard } from "@astrojs/starlight/components";
import CodeBlock from "@components/CodeBlock.astro";
import { Tabs, TabItem } from "@astrojs/starlight/components";

{/* ## Key Features */}

<Tabs>
  <TabItem label="TypeScript-First">
    ```ts twoslash
    import { defineStates, createMachine, zen } from "matchina";
    // TypeScript automatically infers parameter types based on destination states
    const states = defineStates({
      Idle: undefined,
      Playing: (trackId: string) => ({ trackId }),
      Paused: (trackId: string) => ({ trackId }),
      Stopped: undefined,
    });
    
    const baseMachine = createMachine(
      states,
      {
        Idle: { 
          start: (trackId: string) => "Playing" // Parameter type matches Playing state
        },
        // ...transitions
      },
      "Idle"
    );
    
    const player = zen(baseMachine);

    // Full type safety for state transitions
    player.start("song-123");  // âœ“ TypeScript knows this needs a trackId
    player.start();            // âœ— Error: Expected 1 argument, but got 0
    ```

  </TabItem>
  <TabItem label="Pattern Matching">
    ```ts
    // Use pattern matching to handle different states
    const message = player.state.match({
      Idle: () => "Not playing",
      Playing: ({ trackId }) => `Now playing: ${trackId}`,
      Paused: ({ trackId }) => `Paused: ${trackId}`,
      Stopped: () => "Stopped",
    });
    ```
  </TabItem>
  <TabItem label="Type Guards">
    ```ts
    // Type guards automatically narrow types
    if (player.state.is("Playing")) {
      // TypeScript knows player.state.data has trackId
      console.log(player.state.data.trackId);  // âœ“ Type-safe
    }
    ```
  </TabItem>
  <TabItem label="Promise Handling">
    ```ts
    // Create a promise machine for async operations
    const fetcher = createPromiseMachine(
      (id: string) => fetch(`/api/data/${id}`).then(r => r.json())
    );
    
    // Type-safe state handling
    const ui = fetcher.getState().match({
      Idle: () => "Ready to fetch data",
      Pending: ({params}) => `Loading data for ${params[0]}...`,
      Resolved: (data) => `Data loaded: ${JSON.stringify(data)}`,
      Rejected: (error) => `Error: ${error.message}`
    });
    ```
  </TabItem>
</Tabs>

## Quick Installation

```sh
npm install matchina
```

## Get Started

<CardGrid>
  <LinkCard
    title="ðŸ“š Quick Start Guide"
    href="./guides/quickstart/"
    description="Get up and running with Matchina in minutes"
  />
  <LinkCard
    title="âš™ï¸ State Machines Guide"
    href="./guides/machines/"
    description="Learn how to build complex state machines with type safety"
  />
  <LinkCard
    title="â³ Promise Machines Guide"
    href="./guides/promises/"
    description="Manage async operations with type-safe promise machines"
  />
  <LinkCard
    title="ðŸ›¡ï¸ Type Guards Guide"
    href="./guides/typeguards/"
    description="Understand type-safe state handling with Matchina"
  />
  <LinkCard
    title="âš›ï¸ React Integration Guide"
    href="./guides/integrations/"
    description="Integrate state machines with React components"
  />
  <LinkCard
    title="ðŸ§© Type-Safe Unions"
    href="./guides/union-machines/"
    description="Learn about Matchbox for tagged unions"
  />
</CardGrid>

## Explore Examples

<CardGrid>
  <LinkCard
    title="ðŸ”„ Toggle"
    href="./examples/toggle/"
    description="Simple on/off toggle state machine"
  />
  <LinkCard
    title="ðŸ“¡ Data Fetching"
    href="./examples/fetcher-advanced/"
    description="Type-safe async data fetching"
  />
  <LinkCard
    title="ðŸš¦ Traffic Light"
    href="./examples/traffic-light/"
    description="State machine with automatic transitions"
  />

</CardGrid>
